# scroll-io

Wrapper for IntersectionObserver that returns the scroll direction and state

```
npm i @imjasonmiller/scroll-io
```

## Example

```ts
import { ScrollIO } from '@imjasonmiller/scroll-io';

// Cache '.caption' elements, each a child of '.feature'
const captions = document.querySelectorAll('.caption');

const handler = ({ enterDown, leaveUp }, entry) => {
    const ratio = entry.intersectionRatio;

    if (enterDown || leaveUp) {
        captions[index].style.transform = `translateY(${50 * (1 - ratio)}%)`;
        captions[index].style.opacity = ratio;
    }
};

const observer = new ScrollIO('.feature', handler, {
    range: { steps: 50 },
});
```

## Syntax

```ts
const observer = new ScrollIO(selection,callback[, options]);

```
### Parameters

#### `selection`

| Default | Type                                       |
| ------- | ------------------------------------------ |
| `null`  | String \| Element \| NodeListOf\<Element\> |

String expects a selection string, e.g. `.element` or `#element`.

#### `callback`

| Default | Type     |
| ------- | -------- |
| `null`  | Function |

Callback that is called on each intersection and receives the following arguments:

```ts
{
  index: number,
  enterUp: boolean,
  enterDown: boolean,
  leaveUp: boolean,
  leaveDown: boolean,
},
entry: IntersectionObserverEntry,
```

If needed, the `index` for each added element allows you to quickly access the children if cached outside of the handler, preventing unnecessary `querySelector` calls.

#### `options`

An optional object which accepts the following properties:

#### `range`

| Default                         | Type   |
| ------------------------------- | ------ |
| `{ min: 0, max: 1, steps: 0 }`  | Object |

A wide range of intersection thresholds can be generated by passing a number to `steps`. Passing `4` will generate: `[0, 0.25, 0.5, 0.75, 1.0]`, as each step will be `(max - min) / steps = 0.25`.

If you would like to limit the range, set `min` or/and `max`.

If you want to pass a single threshold value, you only have to pass `min`.

#### `namespace`

| Default      | Type   |
| ------------ | ------ |
| `__scrollio` | String |

Each `HTMLElement` passed to `selection` will have a property attached to it in order to keep track of the `index` and scroll directions. The default `namespace` can be changed if desired.

### Methods

#### `disconnect()`

Stops the observer.

